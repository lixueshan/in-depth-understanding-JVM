# 第2章 Java内存区域与内存溢出异常

问题集：
```
1. 
2. 
3. 
```

## 运行时数据区

JVM管理的内存可划分为如下：

- 线程私有
  - 程序计数器
  - 虚拟机栈
  - 本地方法栈
- 线程共享
  - 方法区
  - 堆

### 各区域总结

| 区域 | 作用 | 异常 | 备注 |
| --- | --- | --- | --- |
| 程序计数器 |  当前线程所执行字节码的行号指示器 | 无OOM | CPU切换线程处理指令需要知道该线程处理到的位置，因此是线程私有的。 |
| 虚拟机栈 | 描述Java方法执行的线程内存模型 | SOF/OOM | 一个方法的调用到执行结束对应一个栈帧在虚拟机栈中入栈到出栈。 |
| 本地方法栈 | 与虚拟机栈类似，但针对的是Native方法 | SOF/OOM | HotSpot将虚拟机栈和本地方法栈合二为一。 |
| 方法区 | 存储已被虚拟机加载的类信息和即时编译后的代码缓存 | OOM | JDK8后放弃永久代概念，以本地内存中实现的元空间来代表。物理上是对的一部分。|
| 堆 | 存放几乎所有对象实例 | OOM | 物理可不连续，逻辑连续。<br>可扩展(-Xmx/-Xms)。<br>从垃圾管理角度可分为不同年代区域。从分配内存角度，可废除多个线程私有的分配缓冲区(TLAB)|

![运行时数据区](https://tva1.sinaimg.cn/large/008i3skNgy1guk1zb43zsj60u00vdgnu02.jpg)

## HotSpot虚拟机对象探秘

